<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>


  <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="menu:org.eclipse.ui.main.menu?before=help">
         <menu
               id="contact"
               label="Contact"
               mnemonic="C">
         </menu>
      </menuContribution>
      <menuContribution
            locationURI="toolbar:org.eclipse.ui.main.toolbar">
         <toolbar
               id="probtoolbar">
         </toolbar>
      </menuContribution>
      <menuContribution
            locationURI="popup:de.prob.standalone.navigatorview">
         <separator
               name="de.prob.ui.separator2"
               visible="true">
         </separator>
         <command
               commandId="de.prob.ui.starteventbanimation"
               icon="icons/icon16.png"
               label="Start Animation / Model Checking"
               style="push">
            <visibleWhen>
               <with
                     variable="selection">
                  <iterate
                        operator="or">
                     <and>
                        <instanceof
                              value="org.eclipse.core.resources.IResource">
                        </instanceof>
                        <or>
                           <test
                                 forcePluginActivation="true"
                                 property="org.eclipse.core.resources.extension"
                                 value="bum">
                           </test>
                           <test
                                 forcePluginActivation="true"
                                 property="org.eclipse.core.resources.extension"
                                 value="buc">
                           </test>
                        </or>
                     </and>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="de.prob.command.startClassicalBAnimation"
               icon="icons/icon16.png"
               label="Start Animation / Model Checking"
               style="push">
            <visibleWhen>
               <with
                     variable="selection">
                  <iterate
                        operator="or">
                     <and>
                        <instanceof
                              value="org.eclipse.core.resources.IResource">
                        </instanceof>
                        <test
                              forcePluginActivation="true"
                              property="org.eclipse.core.resources.extension"
                              value="mch">
                        </test>
                     </and>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="de.bmotionstudio.command.startVisualizationFromFile"
               icon="icons/bms/bmsrun16.png"
               label="Start Visualization"
               style="push">
            <visibleWhen>
               <with
                     variable="selection">
                  <iterate
                        operator="or">
                     <and>
                        <instanceof
                              value="org.eclipse.core.resources.IResource">
                        </instanceof>
                        <test
                              forcePluginActivation="true"
                              property="org.eclipse.core.resources.extension"
                              value="bmso">
                        </test>
                     </and>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <separator
               name="de.prob.ui.separator1"
               visible="true">
         </separator>
      </menuContribution>
      <menuContribution
            locationURI="menu:file">
         <command
               commandId="org.eclipse.ui.newWizard"
               label="New"
               style="push">
         </command>
         <separator
               name="de.prob.standalone.separator1"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.ui.file.save"
               label="Save"
               style="push">
         </command>
         <command
               commandId="org.eclipse.ui.file.saveAll"
               label="Save All"
               style="push">
         </command>
         <separator
               name="de.prob.standalone.separator2"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.ui.file.close"
               label="Close"
               style="push">
         </command>
         <command
               commandId="org.eclipse.ui.file.closeAll"
               label="Close All"
               style="push">
         </command>
         <separator
               name="de.prob.standalone.separator3"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.ui.file.refresh"
               label="Refresh"
               style="push">
         </command>
      </menuContribution>
   </extension>




   <extension
         id="application"
         point="org.eclipse.core.runtime.applications">
      <application>
         <run
               class="de.prob.standalone.Application">
         </run>
      </application>
   </extension>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="de.prob.standalone.internal.AnimationPerspective"
            icon="icons/icon16.png"
            id="de.prob.ui.perspective"
            name="Animation">
      </perspective>
      <perspective
            class="de.prob.standalone.internal.VisualizationEditPerspective"
            icon="icons/bms/bms16.png"
            id="de.bmotionstudio.perspective.edit"
            name="Visualization">
      </perspective>
      <perspective
            class="de.prob.standalone.internal.VisualizationRunPerspective"
            icon="icons/bms/bmsrun16.png"
            id="de.bmotionstudio.perspective.run"
            name="Visualization">
      </perspective>
   </extension>
 <!--  <extension
         point="org.eclipse.ui.actionSets">
      <actionSet
            label="ProB Demo Action Set"
            visible="true"
            id="demoActionSet">
         <menu
               label="File"
               id="sampleMenu">
            <separator
                  name="fileGroup">
            </separator>
         </menu>
         <action
               label="Open File"
               class="de.prob.standalone.actions.OpenFileAction"
               tooltip="Open a file"
               menubarPath="sampleMenu/fileGroup"
               id="openFileAction">
         </action>
         <action
               label="Open Event-B Model"
               class="de.prob.standalone.actions.OpenEventBFileAction"
               tooltip="Open an Event-B Model"
               menubarPath="sampleMenu/fileGroup"
               id="openFileAction">
         </action>
      </actionSet>
   </extension>
   
   -->
   <extension
         id="prob"
         point="org.eclipse.core.runtime.products">
      <product
            application="de.prob.standalone.application"
            name="ProB">
         <property
               name="appName"
               value="ProB">
         </property>
         <property
               name="preferenceCustomization"
               value="plugin_customization.ini">
         </property>
         <property
               name="aboutImage"
               value="icons/icon16.png">
         </property>
         <property
               name="aboutText"
               value="ProB: An Animator and Model Checker for B&#x0A;-----------------------------------------&#x0A;&#x0A;(C) 2000-2010 Michael Leuschel (and many others; see below)&#x0A;All rights reserved.&#x0A;ProB can now be used freely for commercial, non-commercial&#x0A;and academic use.&#x0A;For availability of commercial support, please contact the author&#x0A;(http://www.stups.uni-duesseldorf.de/~leuschel).&#x0A;No re-distribution allowed. Use of ProB&apos;s nauty&#x0A;library for symmetry reduction implies further&#x0A;restrictions (no applications with nontrivial military&#x0A;significance, see http://cs.anu.edu.au/~bdm/nauty/).&#x0A;&#x0A;ProB comes with ABSOLUTELY NO WARRANTY OF ANY KIND !&#x0A;This software is distributed in the hope that it will be useful&#x0A;but WITHOUT ANY WARRANTY. The author(s) do not accept responsibility&#x0A;to anyone for the consequences of using it or for whether it serves&#x0A;any particular purpose or works at all. No warranty is made about&#x0A;the software or its performance.&#x0A;&#x0A;For updates and news check:&#x0A;   http://www.stups.uni-duesseldorf.de/ProB/&#x0A;&#x0A;ProB uses state-of-the-art Prolog technology (co-routining, finite&#x0A;domain constraint solvers,...) to achieve symbolic debugging,&#x0A;constraint-based and temporal-logic based model checking.&#x0A;The tool was partly being developed within the EPSRC grants iMoc and ABCD&#x0A;and the EU grant ASAP. Further development within RODIN has been carried out.&#x0A;Future developments within DEPLOY and GEPAVAS are being undertaken.&#x0A;&#x0A;Development, Copyright and Intellectual Property Rights:&#x0A;B-Kernel &amp; Model Checker:&#x0A;	Michael Leuschel, Daniel Plagge, Jens Bendisposto&#x0A;Java Interface:&#x0A;	Jens Bendisposto, Daniel Plagge, Michael Leuschel&#x0A;B Parser:&#x0A;	Fabian Fritz&#x0A;B Typechecker:&#x0A;	Daniel Plagge&#x0A;Event-B Translator:&#x0A;	Jens Bendipsoto, Daniel Plagge&#x0A;ProZ, LTL model checker:&#x0A;	Daniel Plagge, Michael Leuschel&#x0A;ProCSP:&#x0A;	Michael Leuschel, Marc Fontaine&#x0A;Parser for CSP-M:&#x0A;	Marc Fontaine&#x0A;Nauty interface for ProB:&#x0A;	Corinna Spermann, Michael Leuschel&#x0A;Symmetry Hash Markers&#x0A;	Michael Leuschel, Thierry Massart&#x0A;ProMLA&#x0A;    Dennis Winter, Michael Leuschel&#x0A;&#x0A;Other Developers:&#x0A;	Michael Butler, Carla Ferreira,&#x0A;	Stephane Lo-Presti, Li Luo, Leonid Mikhailov,&#x0A;	Ed Turner, Phil Turner&#x0A;	&#x0A;&#x0A;Fuzz Parser and Type Checker for Z:&#x0A;    Mike Spivey&#x0A;    (see http://spivey.oriel.ox.ac.uk/mike/fuzz)&#x0A;Nauty library for symmetry reduction:&#x0A;   Copyright (1984-2007) Brendan McKay&#x0A;   http://cs.anu.edu.au/~bdm/nauty/&#x0A;&#x0A;Known limitations:&#x0A;==================&#x0A; - Unsupported features: &#x0A;    the closure operator (but closure1 is supported), tuple notation&#x0A;    without parentheses a,b,c  (use (a,b,c) instead), relational&#x0A;    composition needs to be put inside parantheses, the VALUES clause, ...&#x0A;    (see ProB Summary in About menu for which features are supported)&#x0A; - Atelier B&apos;s tree operations are not supported&#x0A; - Preconditions of operations are not automatically propagated down&#x0A;   to operations in refinements and implementations&#x0A; - Refinement checker treats PRE as SELECT&#x0A; - ... possibly more ...&#x0A;&#x0A;Notes:&#x0A;======&#x0A; - To visualize state space graphs: dot from AT&amp;T&apos;s GraphViz package has to be installed&#x0A;&#x0A;See the FAQ.txt file for troubleshooting and frequently asked questions.">
         </property>
         <property
               name="windowImages"
               value="icons/icon16.png,icons/icon32.png,icons/icon48png,icons/icon64.png,icons/icon128.png">
         </property>
         <property
               name="startupForegroundColor"
               value="FFFFFF">
         </property>
         <property
               name="startupMessageRect"
               value="20,350,670,20">
         </property>
         <property
               name="startupProgressRect"
               value="15,370,670,20">
         </property>
      </product>
   </extension>
      <extension
         point="org.eclipse.ui.presentationFactories">
      <factory
            class="de.prob.standalone.presentation.PresentationFactory"
            id="de.prob.standalone.presentation"
            name="ProB Presentation">
      </factory>
   </extension>


  <extension
    point="org.eclipse.ui.activities">
  <activity id="hiddenActivity" name="Hide Eclipse UI "/> 
  <activityPatternBinding
      activityId="hiddenActivity"
      isEqualityPattern="false"
      pattern="org\.eclipse\.ui\.project\..*">
  </activityPatternBinding>
</extension>
     <extension
        point="org.eclipse.ui.views">
     <view
           allowMultiple="false"
           class="org.eclipse.ui.navigator.CommonNavigator"
           id="de.prob.standalone.navigatorview"
           name="Navigation"
           restorable="true">
     </view>
  </extension>
  <extension
        point="org.eclipse.ui.navigator.viewer">
     <viewer
           viewerId="de.prob.standalone.navigatorview">
     </viewer>
     <viewerContentBinding
           viewerId="de.prob.standalone.navigatorview">
        <includes>
           <contentExtension
                 pattern="org.eclipse.ui.navigator.resourceContent">
           </contentExtension>
           <contentExtension
                 pattern="org.eclipse.ui.navigator.resources.filters.*">
           </contentExtension>
           <contentExtension
                 pattern="de.prob.standalone.commonFilter.*">
           </contentExtension>
           <contentExtension
                 pattern="de.prob.standalone.navigatorContent.*">
           </contentExtension>
        </includes>
     </viewerContentBinding>
     <viewerActionBinding
           viewerId="de.prob.standalone.navigatorview">
        <includes>
           <actionExtension
                 pattern="org.eclipse.ui.navigator.resources.*">
           </actionExtension></includes>
     </viewerActionBinding>
  </extension>
  <extension
        point="org.eclipse.ui.navigator.navigatorContent">
     <navigatorContent
           activeByDefault="true"
           contentProvider="de.prob.standalone.internal.FormalModelContentProvider"
           id="de.prob.standalone.navigatorContent.formalModelContent"
           labelProvider="de.prob.standalone.internal.FormalModelLabelProvider"
           name="Formal Model Content"
           priority="normal">
        <triggerPoints>
           <or>
              <and>
                 <instanceof
                       value="org.eclipse.core.resources.IResource">
                 </instanceof>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.core.resources.extension"
                       value="bum">
                 </test>
              </and>
              <and>
                 <instanceof
                       value="org.eclipse.core.resources.IResource">
                 </instanceof>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.core.resources.extension"
                       value="buc">
                 </test>
              </and>
              <and>
                 <instanceof
                       value="org.eclipse.core.resources.IResource">
                 </instanceof>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.core.resources.extension"
                       value="mch">
                 </test>
              </and>
              <and>
                 <instanceof
                       value="org.eclipse.core.resources.IResource">
                 </instanceof>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.core.resources.extension"
                       value="bmso">
                 </test>
              </and>
           </or>
        </triggerPoints>
     </navigatorContent>
     <commonFilter
           activeByDefault="true"
           id="de.prob.standalone.commonFilter.probFileFilter"
           name="ProB File Filter">
        <filterExpression>
           <or>
              <instanceof
                    value="org.eclipse.core.resources.IFolder">
              </instanceof>
              <and>
                 <instanceof
                       value="org.eclipse.core.resources.IFile">
                 </instanceof>
                 <not>
                    <and>
                       <instanceof
                             value="org.eclipse.core.resources.IFile">
                       </instanceof>
                       <test
                             forcePluginActivation="true"
                             property="org.eclipse.core.resources.extension"
                             value="buc">
                       </test>
                    </and>
                 </not>
                 <not>
                    <and>
                       <instanceof
                             value="org.eclipse.core.resources.IFile">
                       </instanceof>
                       <test
                             forcePluginActivation="true"
                             property="org.eclipse.core.resources.extension"
                             value="bum">
                       </test>
                    </and>
                 </not>
                 <not>
                    <and>
                       <instanceof
                             value="org.eclipse.core.resources.IFile">
                       </instanceof>
                       <test
                             forcePluginActivation="true"
                             property="org.eclipse.core.resources.extension"
                             value="bmso">
                       </test>
                    </and>
                 </not>
                 <not>
                    <and>
                       <instanceof
                             value="org.eclipse.core.resources.IFile">
                       </instanceof>
                       <test
                             forcePluginActivation="true"
                             property="org.eclipse.core.resources.extension"
                             value="mch">
                       </test>
                    </and>
                 </not>
              </and>
           </or>
        </filterExpression>
     </commonFilter>
  </extension>
  <extension
        point="org.eclipse.ui.commands">
     <command
           id="de.prob.command.startClassicalBAnimation"
           name="Classical-B Animate / Model Check">
     </command>
  </extension>
  <extension
        point="org.eclipse.ui.handlers">
     <handler
           commandId="de.prob.command.startClassicalBAnimation">
        <class
              class="de.prob.standalone.handler.StartClassicalBAnimationHandler">
        </class>
        <enabledWhen>
           <with
                 variable="selection">
              <iterate
                    operator="or">
                 <and>
                    <instanceof
                          value="org.eclipse.core.resources.IResource">
                    </instanceof>
                    <test
                          forcePluginActivation="true"
                          property="org.eclipse.core.resources.extension"
                          value="mch">
                    </test>
                 </and>
              </iterate>
           </with>
        </enabledWhen>
     </handler>
  </extension>
  <extension
        point="de.bmotionstudio.gef.editor.language">
     <language
           id="ClassicalB"
           service="de.prob.standalone.internal.ClassicalBLanguageService">
     </language>
  </extension>
   
   
</plugin>
