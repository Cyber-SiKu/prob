groupID			=	"de.prob"
features		=	["de.prob2.feature"]		// must be the same as the folder name

descriptions	=	[["de.prob2.feature": "ProB Rodin Plugin"],["de.prob2.feature": """ProB is an animator and model checker for the B-Method. It allows
fully automatic animation of many B specifications, and can be
used to systematically check a specification for errors. 
Part of the research and development was conducted within the
EPSRC funded projects ABCD and iMoc, and within the EU funded
project Rodin. 
Development is continued under the EU funded project Deploy and
the DFG project Gepavas. 
ProB has been successfully used on various industrial specifications
and is now being used within Siemens."""] ]		// label and descriptions of the features

repositoryName	=	groupID+".repository"		// will be the folder name
parentID		= 	groupID+".parent"			// will be the same as the folder name

targetRepositories = ["http://cobra.cs.uni-duesseldorf.de/prob_dev_target/","http://download.eclipse.org/releases/indigo/"]		// ps Repository with Target Definition File

apply from: 'tycho_build.gradle'

// Local tasks
def download(address,target) {
	    def file = new FileOutputStream(target)
	    def out = new BufferedOutputStream(file)
	    out << new URL(address).openStream()
	    out.close()
}

task downloadCli << {
		dir = 'de.prob.core/prob/'
		delete file(dir)
	    new File(dir).mkdirs() 
	
		['leopard':'macos','linux':'linux','linux64':'linux64','win32':'windows'].each {
		n = it.getKey()
	
		targetdir = dir+it.getValue()
		targetzip = dir+"probcli_${n}.zip"
		url = "http://nightly.cobra.cs.uni-duesseldorf.de/cli/probcli_${n}.zip"
		download(url,targetzip)
	    FileTree zip = zipTree(targetzip)
	    copy {
		   from zip
		   into targetdir
	    }
		delete file(targetzip)
	}

	targetdir = dir+"windows/"
	targetzip = targetdir+"windowslib.zip"
	download("http://nightly.cobra.cs.uni-duesseldorf.de/cli/windowslib.zip",targetzip)
	FileTree zip = zipTree(targetzip)
	    copy {
		   from zip
		   into targetdir
	    }
	delete file(targetzip)
	
}

task collectArtifacts(type:Copy) {
	    from groupID+'.repository/target/repository/'
	    into 'updatesite'
	    from "index.html"
	    into 'updatesite'
}
